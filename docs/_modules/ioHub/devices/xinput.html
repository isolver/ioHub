
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ioHub.devices.xinput &mdash; ioHub 0.6rc1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap-2.2.1.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap-responsive-2.2.1.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.6rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/..\..\Python-2.7.3\Lib\site-packages\IPython\frontend\html\notebook\static\mathjax"></script>
    <script type="text/javascript" src="../../../_static/js/bootstrap-2.2.1.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="ioHub 0.6rc1 documentation" href="../../../index.html" />
    <link rel="up" title="ioHub.devices" href="../devices.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
<div class="container">
  
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="brand" href="../../../index.html">ioHub</a>
      <span class="navbar-text pull-left"><b>0.6rc1</b></span>

      <div class="nav-collapse">
        <ul class="nav">
          <li class="divider-vertical"></li>
          
            <li class="dropdown">
  <a href="../../../index.html" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/api/api_home.html">API Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/api/indices.html">6. API Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/performance.html">Performance Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/change_log.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/iohub_license.html">License</a></li>
</ul>
</ul>
</li>
            <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"></ul>
</li>
          
          
            
          
          
            <li></li>
          
        </ul>

        
          
<form class="navbar-search pull-right" style="margin-bottom:-3px;" action="../../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

  
  <h1>Source code for ioHub.devices.xinput</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">ioHub Python Module</span>
<span class="sd">.. file: ioHub/devices/xinput/__init__.py</span>

<span class="sd">fileauthor: Sol Simpson &lt;sol@isolver-software.com&gt;</span>

<span class="sd">Copyright (C) 2012 Sol Simpson</span>
<span class="sd">Distributed under the terms of the GNU General Public License </span>
<span class="sd">(GPL version 3 or any later version).</span>

<span class="sd">.. moduleauthor:: Sol Simpson &lt;sol@isolver-software.com&gt; + </span>
<span class="sd">contributors, please see credits section of documentation.</span>
<span class="sd">&quot;&quot;&quot;</span>
 
<span class="kn">import</span> <span class="nn">xinput</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">N</span>
<span class="kn">import</span> <span class="nn">gevent</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">Computer</span><span class="p">,</span> <span class="n">Device</span><span class="p">,</span> <span class="n">DeviceEvent</span><span class="p">,</span> <span class="n">ioDeviceError</span>
<span class="kn">from</span> <span class="nn">ioHub.constants</span> <span class="kn">import</span> <span class="n">XInputGamePadConstants</span><span class="p">,</span> <span class="n">DeviceConstants</span><span class="p">,</span><span class="n">EventConstants</span>
<span class="kn">from</span> <span class="nn">ioHub</span> <span class="kn">import</span>  <span class="n">print2err</span>


<span class="k">def</span> <span class="nf">enableXInput</span><span class="p">():</span>
    <span class="c"># Enables xinput on the system </span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">xinput</span><span class="p">,</span><span class="s">&#39;xinput_dll&#39;</span><span class="p">):</span>
        <span class="n">xinput</span><span class="o">.</span><span class="n">loadDLL</span><span class="p">()</span>    
    <span class="n">xinput</span><span class="o">.</span><span class="n">_xinput_dll</span><span class="o">.</span><span class="n">XInputEnable</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">disableXInput</span><span class="p">():</span>
    <span class="c"># Disables xinput on the system </span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">xinput</span><span class="p">,</span><span class="s">&#39;xinput_dll&#39;</span><span class="p">):</span>
        <span class="n">xinput</span><span class="o">.</span><span class="n">loadDLL</span><span class="p">()</span>    
    <span class="n">xinput</span><span class="o">.</span><span class="n">_xinput_dll</span><span class="o">.</span><span class="n">XInputEnable</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
    
<span class="k">class</span> <span class="nc">XInputDevice</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
    <span class="n">_ASSIGNED_USER_IDS</span><span class="o">=</span><span class="p">[]</span>
    <span class="n">_USER2DEVICE</span><span class="o">=</span><span class="nb">dict</span><span class="p">()</span>
    
    <span class="n">DEVICE_TYPE_ID</span><span class="o">=</span><span class="n">DeviceConstants</span><span class="o">.</span><span class="n">XINPUT</span>
    <span class="n">DEVICE_LABEL</span> <span class="o">=</span> <span class="n">DeviceConstants</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">DEVICE_TYPE_ID</span><span class="p">)</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;_user_id&#39;</span><span class="p">,</span><span class="s">&#39;_device_state&#39;</span><span class="p">,</span><span class="s">&#39;_device_state_buffer&#39;</span><span class="p">,</span><span class="s">&#39;_state_time&#39;</span><span class="p">,</span><span class="s">&#39;_time_ci&#39;</span><span class="p">]</span>    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">user_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;user_id&#39;</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;_user_id&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">user_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="o">=</span><span class="n">user_id</span>
        
        <span class="n">type_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;type_id&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">DEVICE_TYPE_ID</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;type_id&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">type_id</span>

        <span class="n">device_class</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;device_class&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;device_class&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">device_class</span>

        <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">name</span>

        <span class="n">os_device_code</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;os_device_code&#39;</span><span class="p">,</span><span class="s">&#39;OS_DEV_CODE_NOT_SET&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;os_device_code&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">os_device_code</span>

        <span class="n">auto_report_events</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;auto_report_events&#39;</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;_isReportingEvents&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">auto_report_events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isReportingEvents</span><span class="o">=</span><span class="n">auto_report_events</span>
        
        <span class="n">max_event_buffer_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;event_buffer_length&#39;</span><span class="p">,</span><span class="mi">256</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;max_event_buffer_length&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">max_event_buffer_length</span>

        <span class="n">monitor_event_types</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;monitor_event_types&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">ALL_EVENT_CLASSES</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;monitor_event_types&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">monitor_event_types</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">xinput</span><span class="p">,</span><span class="s">&#39;xinput_dll&#39;</span><span class="p">):</span>
            <span class="n">xinput</span><span class="o">.</span><span class="n">loadDLL</span><span class="p">()</span>
                       
        <span class="n">Device</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">)</span>
        
                
<div class="viewcode-block" id="GamePad"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad">[docs]</a><span class="k">class</span> <span class="nc">GamePad</span><span class="p">(</span><span class="n">XInputDevice</span><span class="p">):</span> 
    <span class="n">DEVICE_TYPE_ID</span><span class="o">=</span><span class="n">DeviceConstants</span><span class="o">.</span><span class="n">GAMEPAD</span>
    <span class="n">DEVICE_LABEL</span> <span class="o">=</span> <span class="n">DeviceConstants</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">DEVICE_TYPE_ID</span><span class="p">)</span>
    
    <span class="n">ALL_EVENT_CLASSES</span><span class="o">=</span><span class="p">[]</span>
    
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;_capabilities&#39;</span><span class="p">,</span><span class="s">&#39;_battery_information&#39;</span><span class="p">,</span><span class="s">&#39;_keystroke&#39;</span><span class="p">,</span><span class="s">&#39;_rumble&#39;</span><span class="p">]</span>    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;dconfig&#39;</span><span class="p">,{})</span>
        <span class="n">GamePad</span><span class="o">.</span><span class="n">ALL_EVENT_CLASSES</span><span class="o">=</span><span class="n">GamePadStateChangeEvent</span><span class="p">,</span><span class="n">GamePadDisconnectEvent</span><span class="p">,</span><span class="n">GamePadButtonEvent</span><span class="p">,</span><span class="n">GamePadTriggerEvent</span><span class="p">,</span><span class="n">GamePadThumbStickEvent</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;monitor_event_types&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;monitor_event_types&#39;</span><span class="p">,</span><span class="n">GamePad</span><span class="o">.</span><span class="n">ALL_EVENT_CLASSES</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;device_class&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;device_class&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

        <span class="n">XInputDevice</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_startupConfiguration</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ASSIGNED_USER_IDS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ioDeviceError</span><span class="p">(</span><span class="s">&quot;XInputDevice with user_id </span><span class="si">%d</span><span class="s"> already in use.&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ASSIGNED_USER_IDS</span><span class="p">)</span> <span class="o">==</span> <span class="n">xinput</span><span class="o">.</span><span class="n">XUSER_MAX_COUNT</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ioDeviceError</span><span class="p">(</span><span class="s">&quot;XInputDevice max user count reached: </span><span class="si">%d</span><span class="s">.&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">xinput</span><span class="o">.</span><span class="n">XUSER_MAX_COUNT</span><span class="p">))</span>
            
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span> <span class="o">&lt;</span> <span class="n">xinput</span><span class="o">.</span><span class="n">XUSER_MAX_COUNT</span><span class="p">:</span>   
            <span class="n">connectedOK</span><span class="o">=</span><span class="n">_initializeGamePad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">connectedOK</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ioDeviceError</span><span class="p">(</span><span class="s">&quot;XInputDevice with user_id </span><span class="si">%d</span><span class="s"> is not connected.&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="o">=-</span><span class="mi">1</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xinput</span><span class="o">.</span><span class="n">XUSER_MAX_COUNT</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ASSIGNED_USER_IDS</span><span class="p">]:</span>
                <span class="n">connectedOK</span><span class="o">=</span><span class="n">_initializeGamePad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">connectedOK</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ioDeviceError</span><span class="p">(</span><span class="s">&quot;No XInputDevice is Available for Use. Please check Connections.&quot;</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_VIBRATION</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_battery_information</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_BATTERY_INFORMATION</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_CAPABILITIES</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span>
                                        <span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_GAMEPAD</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
                                        <span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_VIBRATION</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setRumble</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<div class="viewcode-block" id="GamePad.getButtons"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.getButtons">[docs]</a>    <span class="k">def</span> <span class="nf">getButtons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">gamepad_state</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">gamepad_state</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">gamepad_state</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span><span class="o">.</span><span class="n">Gamepad</span>

        <span class="n">buttonStates</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getButtonNameList</span><span class="p">(</span><span class="n">gamepad_state</span><span class="o">.</span><span class="n">wButtons</span><span class="p">)</span>
        <span class="n">buttonStates</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_state_time</span><span class="p">,</span>
        <span class="n">buttonStates</span><span class="p">[</span><span class="s">&#39;confidence_interval&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_time_ci</span>
        <span class="k">return</span> <span class="n">buttonStates</span>
</div>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_getButtonNameList</span><span class="p">(</span><span class="n">wbuttons</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">buttonStates</span><span class="o">=</span><span class="nb">dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">wbuttons</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">XInputGamePadConstants</span><span class="o">.</span><span class="n">_keys</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">wbuttons</span><span class="o">&amp;</span><span class="n">k</span> <span class="o">==</span> <span class="n">k</span><span class="p">:</span>
                    <span class="n">buttonStates</span><span class="p">[</span><span class="n">XInputGamePadConstants</span><span class="o">.</span><span class="n">_names</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span><span class="o">=</span><span class="bp">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">buttonStates</span><span class="p">[</span><span class="n">XInputGamePadConstants</span><span class="o">.</span><span class="n">_names</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span><span class="o">=</span><span class="bp">False</span>
        <span class="k">return</span> <span class="n">buttonStates</span>

<div class="viewcode-block" id="GamePad.getTriggers"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.getTriggers">[docs]</a>    <span class="k">def</span> <span class="nf">getTriggers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">gamepad_state</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">gamepad_state</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">gamepad_state</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span><span class="o">.</span><span class="n">Gamepad</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_state_time</span><span class="p">,</span> <span class="n">confidence_interval</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_time_ci</span><span class="p">,</span><span class="n">LeftTrigger</span><span class="o">=</span><span class="n">gamepad_state</span><span class="o">.</span><span class="n">bLeftTrigger</span><span class="o">/</span><span class="mf">255.0</span><span class="p">,</span><span class="n">RightTrigger</span><span class="o">=</span><span class="n">gamepad_state</span><span class="o">.</span><span class="n">bRightTrigger</span><span class="o">/</span><span class="mf">255.0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GamePad.getPressedButtons"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.getPressedButtons">[docs]</a>    <span class="k">def</span> <span class="nf">getPressedButtons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span><span class="o">.</span><span class="n">Gamepad</span><span class="o">.</span><span class="n">wButtons</span>
        </div>
<div class="viewcode-block" id="GamePad.getPressedButtonList"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.getPressedButtonList">[docs]</a>    <span class="k">def</span> <span class="nf">getPressedButtonList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">bdict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getButtonNameList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span><span class="o">.</span><span class="n">Gamepad</span><span class="o">.</span><span class="n">wButtons</span><span class="p">)</span>
        <span class="n">blist</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">bdict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">blist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">blist</span>
        </div>
<div class="viewcode-block" id="GamePad.getThumbSticks"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.getThumbSticks">[docs]</a>    <span class="k">def</span> <span class="nf">getThumbSticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">gamepad_state</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">gamepad_state</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">gamepad_state</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span><span class="o">.</span><span class="n">Gamepad</span>
        <span class="n">leftStick</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">normalizeThumbStickValues</span><span class="p">(</span><span class="n">gamepad_state</span><span class="o">.</span><span class="n">sThumbLX</span><span class="p">,</span><span class="n">gamepad_state</span><span class="o">.</span><span class="n">sThumbLY</span><span class="p">,</span><span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE</span><span class="p">)</span>
        <span class="n">rightStick</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">normalizeThumbStickValues</span><span class="p">(</span><span class="n">gamepad_state</span><span class="o">.</span><span class="n">sThumbRX</span><span class="p">,</span><span class="n">gamepad_state</span><span class="o">.</span><span class="n">sThumbRY</span><span class="p">,</span><span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_state_time</span><span class="p">,</span> <span class="n">confidence_interval</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_time_ci</span><span class="p">,</span><span class="n">LeftStick</span><span class="o">=</span><span class="n">leftStick</span><span class="p">,</span><span class="n">RightStick</span><span class="o">=</span><span class="n">rightStick</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_poll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span><span class="o">=</span><span class="n">Computer</span><span class="o">.</span><span class="n">getTime</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">xinput</span><span class="o">.</span><span class="n">_xinput_dll</span><span class="o">.</span><span class="n">XInputGetState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span> <span class="n">xinput</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state_buffer</span><span class="p">))</span>
        <span class="n">t2</span><span class="o">=</span><span class="n">Computer</span><span class="o">.</span><span class="n">getTime</span><span class="p">()</span>


        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="n">xinput</span><span class="o">.</span><span class="n">ERROR_SUCCESS</span><span class="p">:</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkForStateChange</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">changed</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">temp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device_state_buffer</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_state_time</span><span class="o">=</span><span class="n">t2</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_time_ci</span><span class="o">=</span><span class="n">t2</span><span class="o">-</span><span class="n">t</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_device_state_buffer</span><span class="o">=</span><span class="n">temp</span>

                <span class="n">delay</span><span class="o">=</span><span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_lastPollTime</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span> <span class="c"># assuming normal distribution, on average delay will be 1/2 the</span>
                                                 <span class="c"># inter poll interval</span>
                <span class="n">buttons</span><span class="o">=</span><span class="mi">0</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">changed</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;Buttons&#39;</span><span class="p">,[]))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">buttons</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span><span class="o">.</span><span class="n">Gamepad</span><span class="o">.</span><span class="n">wButtons</span>

                <span class="n">gpe</span><span class="o">=</span> <span class="p">[</span>
                    <span class="mi">0</span><span class="p">,</span>                                      <span class="c"># experiment_id filled in by ioHub</span>
                    <span class="mi">0</span><span class="p">,</span>                                      <span class="c"># session_id filled in by ioHub</span>
                    <span class="n">Computer</span><span class="o">.</span><span class="n">_getNextEventID</span><span class="p">(),</span>             <span class="c"># unique event id</span>
                    <span class="n">GamePadStateChangeEvent</span><span class="o">.</span><span class="n">EVENT_TYPE_ID</span><span class="p">,</span>  <span class="c"># id representation of event type</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_state_time</span><span class="p">,</span>                       <span class="c"># device Time</span>
                    <span class="n">t</span><span class="p">,</span>                                      <span class="c"># logged time</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_state_time</span><span class="p">,</span>                       <span class="c"># time (i.e. ioHub Time)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_time_ci</span><span class="p">,</span>                          <span class="c"># confidence Interval</span>
                    <span class="n">delay</span><span class="p">,</span>                                  <span class="c"># delay</span>
                    <span class="mi">0</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>                          <span class="c"># number 0-3 representing which controller event is from.</span>
                    <span class="n">buttons</span><span class="p">,</span>                                <span class="c"># buttons id&#39;s that were pressed at the time of the state change.</span>
                    <span class="s">&#39;B&#39;</span><span class="p">,</span>                                    <span class="c"># buttons 1 char placeholder</span>
                    <span class="n">changed</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;LeftThumbStick&#39;</span><span class="p">,(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)),</span>   <span class="c"># normalized x,y, and magnitude value for left thumb stick</span>
                    <span class="n">changed</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;RightThumbStick&#39;</span><span class="p">,(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)),</span>  <span class="c"># normalized x,y, and magnitude value for right thumb stick</span>
                    <span class="n">changed</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;LeftTrigger&#39;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),</span>      <span class="c"># normalized degree pressed for left trigger button</span>
                    <span class="n">changed</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;RightTrigger&#39;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)</span>     <span class="c"># normalized degree pressed for left trigger button</span>
                    <span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_addNativeEventToBuffer</span><span class="p">(</span><span class="n">gpe</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># TODO: device has disconnected, create a special event.....</span>
            <span class="n">temp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_device_state_buffer</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state_time</span><span class="o">=</span><span class="n">t</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_time_ci</span><span class="o">=</span><span class="n">t2</span><span class="o">-</span><span class="n">t</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_device_state_buffer</span><span class="o">=</span><span class="n">temp</span>

            <span class="n">delay</span><span class="o">=</span><span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_lastPollTime</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span> <span class="c"># assuming normal distribution, on average delay will be 1/2 the</span>
                                             <span class="c"># inter poll interval</span>
            <span class="n">gpe</span><span class="o">=</span> <span class="p">[</span>
                <span class="mi">0</span><span class="p">,</span>                                      <span class="c"># experiment_id filled in by ioHub</span>
                <span class="mi">0</span><span class="p">,</span>                                      <span class="c"># session_id filled in by ioHub</span>
                <span class="n">Computer</span><span class="o">.</span><span class="n">_getNextEventID</span><span class="p">(),</span>             <span class="c"># unique event id</span>
                <span class="n">GamePadDisconnectEvent</span><span class="o">.</span><span class="n">EVENT_TYPE_ID</span><span class="p">,</span>  <span class="c"># id representation of event type</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_state_time</span><span class="p">,</span>                       <span class="c"># device Time</span>
                <span class="n">t</span><span class="p">,</span>                                      <span class="c"># logged time</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_state_time</span><span class="p">,</span>                       <span class="c"># time (i.e. ioHub Time)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_time_ci</span><span class="p">,</span>                          <span class="c"># confidence Interval</span>
                <span class="n">delay</span><span class="p">,</span>                                  <span class="c"># delay</span>
                <span class="mi">0</span><span class="p">,</span>                                      <span class="c">#filter_id 0 by default</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>                          <span class="c"># number 0-3 representing which controller event is from.</span>
                <span class="mi">0</span><span class="p">,</span>                                      <span class="c"># buttons id&#39;s that were pressed at the time of the state change.</span>
                <span class="s">&#39;B&#39;</span><span class="p">,</span>                                      <span class="c"># buttons 1 char placeholder</span>
                <span class="mi">0</span><span class="p">,</span>                                      <span class="c"># normalized x,y, and magnitude value for left thumb stick</span>
                <span class="mi">0</span><span class="p">,</span>                                      <span class="c"># normalized x,y, and magnitude value for right thumb stick</span>
                <span class="mi">0</span><span class="p">,</span>                                      <span class="c"># normalized degree pressed for left trigger button</span>
                <span class="mi">0</span>                                       <span class="c"># normalized degree pressed for left trigger button</span>
                <span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_addNativeEventToBuffer</span><span class="p">(</span><span class="n">gpe</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lastPollTime</span><span class="o">=</span><span class="n">t</span>
        <span class="k">return</span> <span class="bp">True</span>


    <span class="k">def</span> <span class="nf">_getIOHubEventObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">event</span> <span class="c"># already a Gamepad Event</span>

    <span class="k">def</span> <span class="nf">_checkForStateChange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">g1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span><span class="o">.</span><span class="n">Gamepad</span>
        <span class="n">g2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_device_state_buffer</span><span class="o">.</span><span class="n">Gamepad</span>
        <span class="n">changed</span><span class="o">=</span><span class="p">{}</span>      
            
        <span class="k">if</span> <span class="n">g1</span><span class="o">.</span><span class="n">wButtons</span><span class="o">!=</span><span class="n">g2</span><span class="o">.</span><span class="n">wButtons</span><span class="p">:</span>
            <span class="n">buttonNameList</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">if</span> <span class="n">g2</span><span class="o">.</span><span class="n">wButtons</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">XInputGamePadConstants</span><span class="o">.</span><span class="n">_keys</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">g2</span><span class="o">.</span><span class="n">wButtons</span><span class="o">&amp;</span><span class="n">k</span> <span class="o">==</span> <span class="n">k</span><span class="p">:</span>
                        <span class="n">buttonNameList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">XInputGamePadConstants</span><span class="o">.</span><span class="n">_names</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="n">changed</span><span class="p">[</span><span class="s">&#39;Buttons&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">buttonNameList</span>
            

        <span class="k">if</span> <span class="n">g1</span><span class="o">.</span><span class="n">bLeftTrigger</span><span class="o">!=</span><span class="n">g2</span><span class="o">.</span><span class="n">bLeftTrigger</span><span class="p">:</span>
            <span class="n">changed</span><span class="p">[</span><span class="s">&#39;LeftTrigger&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">g2</span><span class="o">.</span><span class="n">bLeftTrigger</span><span class="o">/</span><span class="mf">255.0</span>
        <span class="k">if</span> <span class="n">g1</span><span class="o">.</span><span class="n">bRightTrigger</span><span class="o">!=</span><span class="n">g2</span><span class="o">.</span><span class="n">bRightTrigger</span><span class="p">:</span>
            <span class="n">changed</span><span class="p">[</span><span class="s">&#39;RightTrigger&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">g2</span><span class="o">.</span><span class="n">bRightTrigger</span><span class="o">/</span><span class="mf">255.0</span>


        <span class="k">if</span> <span class="n">g1</span><span class="o">.</span><span class="n">sThumbLX</span><span class="o">!=</span><span class="n">g2</span><span class="o">.</span><span class="n">sThumbLX</span> <span class="ow">or</span> <span class="n">g1</span><span class="o">.</span><span class="n">sThumbLY</span><span class="o">!=</span><span class="n">g2</span><span class="o">.</span><span class="n">sThumbLY</span><span class="p">:</span>        
            <span class="n">nl1</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">normalizeThumbStickValues</span><span class="p">(</span><span class="n">g1</span><span class="o">.</span><span class="n">sThumbLX</span><span class="p">,</span><span class="n">g1</span><span class="o">.</span><span class="n">sThumbLY</span><span class="p">,</span><span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE</span><span class="p">)</span>
            <span class="n">nl2</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">normalizeThumbStickValues</span><span class="p">(</span><span class="n">g2</span><span class="o">.</span><span class="n">sThumbLX</span><span class="p">,</span><span class="n">g2</span><span class="o">.</span><span class="n">sThumbLY</span><span class="p">,</span><span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_GAMEPAD_LEFT_THUMB_DEADZONE</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">nl1</span> <span class="o">!=</span> <span class="n">nl2</span><span class="p">):</span>
                <span class="n">changed</span><span class="p">[</span><span class="s">&#39;LeftThumbStick&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">nl2</span>            
        <span class="k">if</span> <span class="n">g1</span><span class="o">.</span><span class="n">sThumbRX</span><span class="o">!=</span><span class="n">g2</span><span class="o">.</span><span class="n">sThumbRX</span> <span class="ow">or</span> <span class="n">g1</span><span class="o">.</span><span class="n">sThumbRY</span><span class="o">!=</span><span class="n">g2</span><span class="o">.</span><span class="n">sThumbRY</span><span class="p">:</span>            
            <span class="n">nr1</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">normalizeThumbStickValues</span><span class="p">(</span><span class="n">g1</span><span class="o">.</span><span class="n">sThumbRX</span><span class="p">,</span><span class="n">g1</span><span class="o">.</span><span class="n">sThumbRY</span><span class="p">,</span><span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE</span><span class="p">)</span>
            <span class="n">nr2</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">normalizeThumbStickValues</span><span class="p">(</span><span class="n">g2</span><span class="o">.</span><span class="n">sThumbRX</span><span class="p">,</span><span class="n">g2</span><span class="o">.</span><span class="n">sThumbRY</span><span class="p">,</span><span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_GAMEPAD_RIGHT_THUMB_DEADZONE</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">nr1</span> <span class="o">!=</span> <span class="n">nr2</span><span class="p">):</span>
                <span class="n">changed</span><span class="p">[</span><span class="s">&#39;RightThumbStick&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">nr2</span>
            
        <span class="k">return</span> <span class="n">changed</span>
    
<div class="viewcode-block" id="GamePad.setRumble"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.setRumble">[docs]</a>    <span class="k">def</span> <span class="nf">setRumble</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lowFrequencyValue</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">highFrequencyValue</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">duration</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>

        <span class="n">DeNormalizedLowFrequencyValue</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">65535.0</span><span class="o">*</span><span class="p">(</span><span class="n">lowFrequencyValue</span><span class="o">/</span><span class="mf">100.0</span><span class="p">))</span>
        <span class="n">DeNormalizedHighFrequencyValue</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">65535.0</span><span class="o">*</span><span class="p">(</span><span class="n">highFrequencyValue</span><span class="o">/</span><span class="mf">100.0</span><span class="p">))</span>
        
        <span class="k">if</span> <span class="n">DeNormalizedLowFrequencyValue</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wLeftMotorSpeed</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">elif</span> <span class="n">DeNormalizedLowFrequencyValue</span> <span class="o">&gt;</span> <span class="mi">65535</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wLeftMotorSpeed</span><span class="o">=</span><span class="mi">65535</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wLeftMotorSpeed</span><span class="o">=</span><span class="n">DeNormalizedLowFrequencyValue</span>
            
        <span class="k">if</span> <span class="n">DeNormalizedHighFrequencyValue</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wRightMotorSpeed</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">elif</span> <span class="n">DeNormalizedHighFrequencyValue</span> <span class="o">&gt;</span> <span class="mi">65535</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wRightMotorSpeed</span><span class="o">=</span><span class="mi">65535</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wRightMotorSpeed</span><span class="o">=</span><span class="n">DeNormalizedHighFrequencyValue</span>

        <span class="n">t1</span><span class="o">=</span><span class="n">Computer</span><span class="o">.</span><span class="n">getTime</span><span class="p">()</span>
        <span class="n">xinput</span><span class="o">.</span><span class="n">_xinput_dll</span><span class="o">.</span><span class="n">XInputSetState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span> <span class="n">xinput</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="p">))</span>
        <span class="n">t2</span><span class="o">=</span><span class="n">Computer</span><span class="o">.</span><span class="n">getTime</span><span class="p">()</span>

        <span class="n">gevent</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_delayedRumble</span><span class="p">,</span><span class="n">delay</span><span class="o">=</span><span class="n">duration</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t2</span><span class="o">-</span><span class="n">t1</span>
    </div>
    <span class="k">def</span> <span class="nf">_delayedRumble</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lowFrequencyValue</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">highFrequencyValue</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">delay</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">gevent</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wLeftMotorSpeed</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wRightMotorSpeed</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">xinput</span><span class="o">.</span><span class="n">_xinput_dll</span><span class="o">.</span><span class="n">XInputSetState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span> <span class="n">xinput</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="p">))</span>

<div class="viewcode-block" id="GamePad.getRumbleState"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.getRumbleState">[docs]</a>    <span class="k">def</span> <span class="nf">getRumbleState</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">NormalizedLowFrequencyValue</span><span class="o">=</span> <span class="mf">100.0</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wLeftMotorSpeed</span><span class="o">/</span><span class="mf">65535.0</span><span class="p">)</span>
        <span class="n">NormalizedHighFrequencyValue</span><span class="o">=</span> <span class="mf">100.0</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rumble</span><span class="o">.</span><span class="n">wRightMotorSpeed</span><span class="o">/</span><span class="mf">65535.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">NormalizedLowFrequencyValue</span><span class="p">,</span> <span class="n">NormalizedHighFrequencyValue</span>
        </div>
<div class="viewcode-block" id="GamePad.updateBatteryInformation"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.updateBatteryInformation">[docs]</a>    <span class="k">def</span> <span class="nf">updateBatteryInformation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">resultCode</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">_xinput_dll</span><span class="o">.</span><span class="n">XInputGetBatteryInformation</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span> <span class="c"># Index of the gamer associated with the device</span>
            <span class="n">xinput</span><span class="o">.</span><span class="n">BATTERY_DEVTYPE_GAMEPAD</span><span class="p">,</span><span class="c"># Which device on this user index</span>
            <span class="n">xinput</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_battery_information</span><span class="p">))</span> <span class="c"># Contains the level </span>
                                                       <span class="c"># and types of batteries</span>

        <span class="n">bl</span><span class="o">=</span><span class="n">XInputGamePadConstants</span><span class="o">.</span><span class="n">_batteryLevels</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_battery_information</span><span class="o">.</span><span class="n">BatteryLevel</span><span class="p">)</span>
        <span class="n">bt</span><span class="o">=</span><span class="n">XInputGamePadConstants</span><span class="o">.</span><span class="n">_batteryTypes</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_battery_information</span><span class="o">.</span><span class="n">BatteryType</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bl</span><span class="p">,</span><span class="n">bt</span>
        </div>
<div class="viewcode-block" id="GamePad.getLastReadBatteryInfo"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.getLastReadBatteryInfo">[docs]</a>    <span class="k">def</span> <span class="nf">getLastReadBatteryInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">bl</span><span class="o">=</span><span class="n">XInputGamePadConstants</span><span class="o">.</span><span class="n">_batteryLevels</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_battery_information</span><span class="o">.</span><span class="n">BatteryLevel</span><span class="p">)</span>
        <span class="n">bt</span><span class="o">=</span><span class="n">XInputGamePadConstants</span><span class="o">.</span><span class="n">_batteryTypes</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_battery_information</span><span class="o">.</span><span class="n">BatteryType</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bl</span><span class="p">,</span><span class="n">bt</span>
       </div>
<div class="viewcode-block" id="GamePad.updateCapabilitiesInformation"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.updateCapabilitiesInformation">[docs]</a>    <span class="k">def</span> <span class="nf">updateCapabilitiesInformation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">resultCode</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">_xinput_dll</span><span class="o">.</span><span class="n">XInputGetCapabilities</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">,</span>
            <span class="n">xinput</span><span class="o">.</span><span class="n">XINPUT_FLAG_GAMEPAD</span><span class="p">,</span>
            <span class="n">xinput</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="p">))</span>
            
        <span class="n">t</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">Type</span>
        <span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">SubType</span>
        <span class="n">f</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">Flags</span>

        <span class="n">g</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">Gamepad</span>
        <span class="n">b</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">wButtons</span>
        <span class="n">blt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">bLeftTrigger</span>
        <span class="n">brt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">bRightTrigger</span>
        <span class="n">lxt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">sThumbLX</span>
        <span class="n">lyt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">sThumbLY</span>
        <span class="n">rxt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">sThumbRX</span>
        <span class="n">ryt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">sThumbRY</span>
        
        <span class="n">v</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">Vibration</span>
        <span class="n">lf</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">wLeftMotorSpeed</span>
        <span class="n">hf</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">wRightMotorSpeed</span>
        
        <span class="k">return</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">f</span><span class="p">),</span><span class="n">b</span><span class="p">,(</span><span class="n">blt</span><span class="p">,</span><span class="n">brt</span><span class="p">),((</span><span class="n">lxt</span><span class="p">,</span><span class="n">lyt</span><span class="p">),(</span><span class="n">rxt</span><span class="p">,</span><span class="n">ryt</span><span class="p">)),(</span><span class="n">lf</span><span class="p">,</span><span class="n">hf</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GamePad.getLastReadCapabilitiesInfo"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePad.getLastReadCapabilitiesInfo">[docs]</a>    <span class="k">def</span> <span class="nf">getLastReadCapabilitiesInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">Type</span>
        <span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">SubType</span>
        <span class="n">f</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">Flags</span>

        <span class="n">g</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">Gamepad</span>
        <span class="n">b</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">wButtons</span>
        <span class="n">blt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">bLeftTrigger</span>
        <span class="n">brt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">bRightTrigger</span>
        <span class="n">lxt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">sThumbLX</span>
        <span class="n">lyt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">sThumbLY</span>
        <span class="n">rxt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">sThumbRX</span>
        <span class="n">ryt</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">sThumbRY</span>
        
        <span class="n">v</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span><span class="o">.</span><span class="n">Vibration</span>
        <span class="n">lf</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">wLeftMotorSpeed</span>
        <span class="n">hf</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">wRightMotorSpeed</span>
        
        <span class="k">return</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">f</span><span class="p">),</span><span class="n">b</span><span class="p">,(</span><span class="n">blt</span><span class="p">,</span><span class="n">brt</span><span class="p">),((</span><span class="n">lxt</span><span class="p">,</span><span class="n">lyt</span><span class="p">),(</span><span class="n">rxt</span><span class="p">,</span><span class="n">ryt</span><span class="p">)),(</span><span class="n">lf</span><span class="p">,</span><span class="n">hf</span><span class="p">)</span>
            </div>
    <span class="k">def</span> <span class="nf">_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setRumble</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">XInputDevice</span><span class="o">.</span><span class="n">_ASSIGNED_USER_IDS</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">XInputDevice</span><span class="o">.</span><span class="n">_USER2DEVICE</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_user_id</span><span class="o">=</span><span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_device_state</span><span class="o">=</span><span class="bp">None</span>
    
    <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearEvents</span><span class="p">()</span>

</div>
<span class="k">def</span> <span class="nf">_initializeGamePad</span><span class="p">(</span><span class="n">gamepad</span><span class="p">,</span><span class="n">user_id</span><span class="p">):</span>
    <span class="n">dwResult</span><span class="p">,</span> <span class="n">gamepadState</span><span class="p">,</span> <span class="n">stime</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">createXInputGamePadState</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dwResult</span> <span class="o">==</span> <span class="n">xinput</span><span class="o">.</span><span class="n">ERROR_SUCCESS</span><span class="p">:</span>
        <span class="n">gamepad</span><span class="o">.</span><span class="n">_user_id</span><span class="o">=</span><span class="n">user_id</span>
        <span class="n">gamepad</span><span class="o">.</span><span class="n">_device_state</span><span class="o">=</span><span class="n">gamepadState</span>
        <span class="n">gamepad</span><span class="o">.</span><span class="n">_state_time</span><span class="o">=</span><span class="n">stime</span>
        <span class="n">gamepad</span><span class="o">.</span><span class="n">_time_ci</span><span class="o">=</span><span class="n">ci</span>
        <span class="n">XInputDevice</span><span class="o">.</span><span class="n">_ASSIGNED_USER_IDS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">dwResult2</span><span class="p">,</span> <span class="n">gamepadState2</span><span class="p">,</span> <span class="n">stime2</span><span class="p">,</span> <span class="n">ci2</span><span class="o">=</span><span class="n">xinput</span><span class="o">.</span><span class="n">createXInputGamePadState</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">gamepad</span><span class="o">.</span><span class="n">_device_state_buffer</span><span class="o">=</span><span class="n">gamepadState2</span>
        <span class="n">XInputDevice</span><span class="o">.</span><span class="n">_USER2DEVICE</span><span class="p">[</span><span class="n">user_id</span><span class="p">]</span><span class="o">=</span><span class="n">gamepad</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>

<div class="viewcode-block" id="GamePadStateChangeEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePadStateChangeEvent">[docs]</a><span class="k">class</span> <span class="nc">GamePadStateChangeEvent</span><span class="p">(</span><span class="n">DeviceEvent</span><span class="p">):</span>
    <span class="n">PARENT_DEVICE</span><span class="o">=</span><span class="n">GamePad</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">GAMEPAD_EVENT</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">EVENT_TYPE_ID</span><span class="p">)</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">EVENT_TYPE_STRING</span>
    <span class="n">_newDataTypes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="s">&#39;controller_id&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">uint8</span><span class="p">),</span>  <span class="c">#number 0-3 representing which controller event is for.</span>
                                                  <span class="c"># On xbox360 controller, the id of the controller can be</span>
                                                  <span class="c"># visually determined by the quadrant that is illuminated</span>
                                                  <span class="c"># on the center &#39;red circle of light&#39;.</span>
                                                  <span class="c"># Top Left = XINPUT_USER_0 == 0</span>
                                                  <span class="c"># Top Right = XINPUT_USER_1 == 1</span>
                                                  <span class="c"># Bottom Right = XINPUT_USER_2 == 2</span>
                                                  <span class="c"># Bottom Left = XINPUT_USER_3 == 3</span>


                      <span class="p">(</span><span class="s">&#39;buttonIDs&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">uint32</span><span class="p">),</span>     <span class="c"># the buttons that were pressed at the time of the state change.</span>
                                                  <span class="c"># All buttons that are pressed are &amp; together into this field.</span>
                                                  <span class="c"># Use buttons to get a list of the text representation for</span>
                                                  <span class="c"># each button that was pressed in list form</span>
                      <span class="p">(</span><span class="s">&#39;buttons&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">str</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>        <span class="c"># placeholder for button name list when event is viewed as NamedTuple</span>

                      <span class="c"># Thumbsticks are represented in normalized units between 0.0 and 1.0 for x direction, y direction</span>
                      <span class="c"># and magnitude of the thumbstick. x and y are the horizontal and vertical position of the stick</span>
                      <span class="c"># around the center point. Magnitude is how far from the center point the stick location is: 0.0</span>
                      <span class="c"># would equal the stick being in the center position, not moved. 1.0 would indicate the stick</span>
                      <span class="c"># is pushed all the way to the outer rail of the thumbstick movement circle. The resolution of</span>
                      <span class="c"># each thumbstick is about 16 bits for each measure.</span>
                      <span class="p">(</span><span class="s">&#39;leftThumbStick&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">dtype</span><span class="p">([(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">float32</span><span class="p">),(</span><span class="s">&#39;y&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">float32</span><span class="p">),(</span><span class="s">&#39;magnitude&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">float32</span><span class="p">)])),</span>
                      <span class="p">(</span><span class="s">&#39;rightThumbStick&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">dtype</span><span class="p">([(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">float32</span><span class="p">),(</span><span class="s">&#39;y&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">float32</span><span class="p">),(</span><span class="s">&#39;magnitude&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">float32</span><span class="p">)])),</span>

                      <span class="p">(</span><span class="s">&#39;leftTrigger&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>   <span class="c"># the triggers are the two pistol finger analog buttons on the</span>
                                                   <span class="c"># XInput gamepad. The value is normalized to between 0.0 (not pressed)</span>
                                                   <span class="c"># and 1.0 (fully depressed). The resolution of the triggers are 8 bits.</span>
                      <span class="p">(</span><span class="s">&#39;rightTrigger&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
                    <span class="p">]</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">_newDataTypes</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">DeviceEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="GamePadStateChangeEvent.createEventAsDict"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePadStateChangeEvent.createEventAsDict">[docs]</a>    <span class="k">def</span> <span class="nf">createEventAsDict</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="n">values</span><span class="p">):</span>
        <span class="n">ed</span><span class="o">=</span><span class="nb">super</span><span class="p">(</span><span class="n">DeviceEvent</span><span class="p">,</span><span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">createEventAsDict</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ed</span><span class="p">[</span><span class="s">&#39;buttonIDs&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ed</span><span class="p">[</span><span class="s">&#39;buttons&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">{}</span>
            <span class="k">return</span> <span class="n">ed</span>
        <span class="n">ed</span><span class="p">[</span><span class="s">&#39;buttons&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">GamePad</span><span class="o">.</span><span class="n">_getButtonNameList</span><span class="p">(</span><span class="n">ed</span><span class="p">[</span><span class="s">&#39;buttonIDs&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">ed</span>

    <span class="c">#noinspection PyUnresolvedReferences</span></div>
    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="GamePadStateChangeEvent.createEventAsNamedTuple"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePadStateChangeEvent.createEventAsNamedTuple">[docs]</a>    <span class="k">def</span> <span class="nf">createEventAsNamedTuple</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="n">valueList</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">valueList</span><span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">valueList</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span><span class="o">=</span><span class="p">{}</span>
            <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">namedTupleClass</span><span class="p">(</span><span class="o">*</span><span class="n">valueList</span><span class="p">)</span>

        <span class="n">valueList</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span><span class="o">=</span><span class="n">GamePad</span><span class="o">.</span><span class="n">_getButtonNameList</span><span class="p">(</span><span class="n">valueList</span><span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">namedTupleClass</span><span class="p">(</span><span class="o">*</span><span class="n">valueList</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="GamePadDisconnectEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePadDisconnectEvent">[docs]</a><span class="k">class</span> <span class="nc">GamePadDisconnectEvent</span><span class="p">(</span><span class="n">GamePadStateChangeEvent</span><span class="p">):</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">GAMEPAD_DISCONNECT_EVENT</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">EVENT_TYPE_ID</span><span class="p">)</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">GamePadStateChangeEvent</span><span class="o">.</span><span class="n">EVENT_TYPE_STRING</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">GamePadStateChangeEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GamePadButtonEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePadButtonEvent">[docs]</a><span class="k">class</span> <span class="nc">GamePadButtonEvent</span><span class="p">(</span><span class="n">GamePadStateChangeEvent</span><span class="p">):</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">GAMEPAD_BUTTON_EVENT</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">EVENT_TYPE_ID</span><span class="p">)</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">GamePadStateChangeEvent</span><span class="o">.</span><span class="n">EVENT_TYPE_STRING</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">GamePadStateChangeEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GamePadThumbStickEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePadThumbStickEvent">[docs]</a><span class="k">class</span> <span class="nc">GamePadThumbStickEvent</span><span class="p">(</span><span class="n">GamePadStateChangeEvent</span><span class="p">):</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">GAMEPAD_THUMBSTICK_EVENT</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">EVENT_TYPE_ID</span><span class="p">)</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">GamePadStateChangeEvent</span><span class="o">.</span><span class="n">EVENT_TYPE_STRING</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">GamePadStateChangeEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GamePadTriggerEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/xinput_gamepad.html#ioHub.devices.xinput.GamePadTriggerEvent">[docs]</a><span class="k">class</span> <span class="nc">GamePadTriggerEvent</span><span class="p">(</span><span class="n">GamePadStateChangeEvent</span><span class="p">):</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">GAMEPAD_TRIGGER_EVENT</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">EVENT_TYPE_ID</span><span class="p">)</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">GamePadStateChangeEvent</span><span class="o">.</span><span class="n">EVENT_TYPE_STRING</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">GamePadStateChangeEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div></div>

</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, iSolver Software Solutions.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>