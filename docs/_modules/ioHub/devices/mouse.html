
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ioHub.devices.mouse &mdash; ioHub 0.6rc1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap-2.2.1.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap-responsive-2.2.1.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.6rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/..\..\Python-2.7.3\Lib\site-packages\IPython\frontend\html\notebook\static\mathjax"></script>
    <script type="text/javascript" src="../../../_static/js/bootstrap-2.2.1.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="ioHub 0.6rc1 documentation" href="../../../index.html" />
    <link rel="up" title="ioHub.devices" href="../devices.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
<div class="container">
  
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="brand" href="../../../index.html">ioHub</a>
      <span class="navbar-text pull-left"><b>0.6rc1</b></span>

      <div class="nav-collapse">
        <ul class="nav">
          <li class="divider-vertical"></li>
          
            <li class="dropdown">
  <a href="../../../index.html" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/api/api_home.html">API Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/api/indices.html">6. API Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/performance.html">Performance Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/change_log.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../iohub/iohub_license.html">License</a></li>
</ul>
</ul>
</li>
            <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"></ul>
</li>
          
          
            
          
          
            <li></li>
          
        </ul>

        
          
<form class="navbar-search pull-right" style="margin-bottom:-3px;" action="../../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

  
  <h1>Source code for ioHub.devices.mouse</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">ioHub</span>
<span class="sd">.. file: ioHub/devices/mouse/__init__.py</span>

<span class="sd">Copyright (C) 2012-2013 iSolver Software Solutions</span>
<span class="sd">Distributed under the terms of the GNU General Public License (GPL version 3 or any later version).</span>

<span class="sd">.. moduleauthor:: Sol Simpson &lt;sol@isolver-software.com&gt; + contributors, please see credits section of documentation.</span>
<span class="sd">.. fileauthor:: Sol Simpson &lt;sol@isolver-software.com&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">ioHub.devices</span> <span class="kn">import</span> <span class="n">Computer</span><span class="p">,</span> <span class="n">Device</span>
<span class="kn">import</span> <span class="nn">ioHub</span>
<span class="kn">from</span> <span class="nn">ioHub.constants</span> <span class="kn">import</span> <span class="n">EventConstants</span><span class="p">,</span> <span class="n">DeviceConstants</span><span class="p">,</span> <span class="n">MouseConstants</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">N</span>

<span class="n">currentSec</span><span class="o">=</span><span class="n">Computer</span><span class="o">.</span><span class="n">currentSec</span>

<span class="c"># OS &#39; independent&#39; view of the Mouse Device</span>


<span class="k">class</span> <span class="nc">MouseDevice</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Mouse class represents a standard USB or PS2 mouse device that has up to </span>
<span class="sd">    three buttons and an optional vertical scroll wheel. Mouse position data is </span>
<span class="sd">    mapped to the coordinate space defined in the ioHub configuration file for the Display.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">EVENT_CLASS_NAMES</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;MouseInputEvent&#39;</span><span class="p">,</span><span class="s">&#39;MouseButtonEvent&#39;</span><span class="p">,</span><span class="s">&#39;MouseWheelEvent&#39;</span><span class="p">,</span>
                       <span class="s">&#39;MouseMoveEvent&#39;</span><span class="p">,</span> <span class="s">&#39;MouseWheelUpEvent&#39;</span><span class="p">,</span> <span class="s">&#39;MouseWheelDownEvent&#39;</span><span class="p">,</span>
                       <span class="s">&#39;MouseButtonPressEvent&#39;</span><span class="p">,</span><span class="s">&#39;MouseButtonReleaseEvent&#39;</span><span class="p">,</span>
                       <span class="s">&#39;MouseDoubleClickEvent&#39;</span><span class="p">]</span>
                       
    <span class="n">DEVICE_TYPE_ID</span><span class="o">=</span><span class="n">DeviceConstants</span><span class="o">.</span><span class="n">MOUSE</span>
    <span class="n">DEVICE_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE&#39;</span>

    <span class="n">__slots__</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;_lock_mouse_to_display_id&#39;</span><span class="p">,</span><span class="s">&#39;_scrollPositionY&#39;</span><span class="p">,</span><span class="s">&#39;_position&#39;</span><span class="p">,</span>
               <span class="s">&#39;_lastPosition&#39;</span><span class="p">,</span><span class="s">&#39;_display_index&#39;</span><span class="p">,</span><span class="s">&#39;_last_display_index&#39;</span><span class="p">,</span><span class="s">&#39;_isVisible&#39;</span><span class="p">,</span><span class="s">&#39;activeButtons&#39;</span>
               <span class="p">]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>     
        <span class="n">Device</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock_mouse_to_display_id</span><span class="o">=</span><span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scrollPositionY</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lastPosition</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_isVisible</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span><span class="o">=</span><span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_display_index</span><span class="o">=</span><span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">activeButtons</span><span class="o">=</span><span class="p">{</span>
            <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_LEFT</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_RIGHT</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_MIDDLE</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                            <span class="p">}</span>
        
    <span class="k">def</span> <span class="nf">getCurrentButtonStates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">activeButtons</span><span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_LEFT</span><span class="p">]</span><span class="o">!=</span><span class="mi">0</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">activeButtons</span><span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_MIDDLE</span><span class="p">]</span><span class="o">!=</span><span class="mi">0</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">activeButtons</span><span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_RIGHT</span><span class="p">]</span><span class="o">!=</span><span class="mi">0</span><span class="p">)</span>
                
    <span class="k">def</span> <span class="nf">lockMouseToDisplayID</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">display_id</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock_mouse_to_display_id</span><span class="o">=</span><span class="n">display_id</span>    

    <span class="k">def</span> <span class="nf">getlockedMouseDisplayID</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock_mouse_to_display_id</span>   

    <span class="k">def</span> <span class="nf">getPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">return_display_index</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current position of the ioHub Mouse Device. Mouse Position is in display</span>
<span class="sd">        coordinate units, with 0,0 being the center of the screen.</span>

<span class="sd">        Args: </span>
<span class="sd">            return_display_index: if True, the display index that is associated with the mouse position will also be returned.</span>
<span class="sd">        Returns:</span>
<span class="sd">            tuple: If return_display_index is false (default), return (x,y) position of mouse. If return_display_index is True return ( (x,y), display_index). </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">return_display_index</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>        
            <span class="k">return</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span><span class="p">)</span>       
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getDisplayIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current display index of the ioHub Mouse Device. </span>
<span class="sd">        If the display index == the index of the display being used for stimulus</span>
<span class="sd">        presentation, then mouse position is in the display&#39;s coordinate units.</span>
<span class="sd">        If the display index != the index of the display being used for stimulus</span>
<span class="sd">        presentation, then mouse position is in OS system mouse ccordinate space.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>
<span class="sd">        Returns:</span>
<span class="sd">            (int): index of the Display the mouse is over. Display index&#39;s range from 0 to N-1, where N is the number of Display&#39;s active on the Computer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span>
        
    <span class="k">def</span> <span class="nf">getPositionAndDelta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">return_display_index</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a tuple of tuples, being the current position of the ioHub Mouse Device as an (x,y) tuple,</span>
<span class="sd">        and the amount the mouse position changed the last time it was updated (dx,dy).</span>
<span class="sd">        Mouse Position and Delta are in display coordinate units.</span>

<span class="sd">        Args: None</span>
<span class="sd">        Return (tuple): ( (x,y), (dx,dy) ) position of mouse, change in mouse position,</span>
<span class="sd">                                           both in Display coordinate space.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cpos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
            <span class="n">lpos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_lastPosition</span>
            <span class="n">change_x</span><span class="o">=</span><span class="n">cpos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">lpos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">change_y</span><span class="o">=</span><span class="n">cpos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">lpos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">return_display_index</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>        
                <span class="k">return</span> <span class="p">(</span><span class="n">cpos</span><span class="p">,</span> <span class="p">(</span><span class="n">change_x</span><span class="p">,</span><span class="n">change_y</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span><span class="p">)</span>       
            <span class="k">return</span> <span class="n">cpos</span><span class="p">,</span> <span class="p">(</span><span class="n">change_x</span><span class="p">,</span><span class="n">change_y</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot;&gt;&gt;ERROR getPositionAndDelta: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="n">ioHub</span><span class="o">.</span><span class="n">printExceptionDetailsToStdErr</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">return_display_index</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>        
                <span class="k">return</span> <span class="p">((</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span><span class="p">)</span>       
            <span class="k">return</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getVerticalScroll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current vertical scroll value for the mouse. The vertical scroll value changes when the</span>
<span class="sd">        scroll wheel on a mouse is moved up or down. The vertical scroll value is in an arbitrary value space</span>
<span class="sd">        ranging for -32648 to +32648. Scroll position is initialize to 0 when the experiment starts.</span>
<span class="sd">        Args: None</span>
<span class="sd">        Returns (int): current vertical scroll value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scrollPositionY</span>

    <span class="k">def</span> <span class="nf">setVerticalScroll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the current vertical scroll value for the mouse. The vertical scroll value changes when the</span>
<span class="sd">        scroll wheel on a mouse is moved up or down. The vertical scroll value is in an</span>
<span class="sd">        arbitrary value space ranging for -32648 to +32648. Scroll position is initialize to 0 when</span>
<span class="sd">        the experiment starts. This method allows you to change the scroll value to anywhere in the</span>
<span class="sd">        valid value range.</span>
<span class="sd">        Args (int): The scroll position you want to set the vertical scroll to. Should be a number</span>
<span class="sd">                    between -32648 to +32648.</span>
<span class="sd">        Returns (int): current vertical scroll value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">long</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_scrollPositionY</span><span class="o">=</span><span class="n">s</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scrollPositionY</span>
        
    <span class="k">def</span> <span class="nf">getDisplayIndexForMousePosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">system_mouse_pos</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_device</span><span class="o">.</span><span class="n">getDisplayIndexForNativePixelPosition</span><span class="p">(</span><span class="n">system_mouse_pos</span><span class="p">)</span>


<span class="k">if</span> <span class="n">Computer</span><span class="o">.</span><span class="n">system</span> <span class="o">==</span> <span class="s">&#39;Windows&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">ctypes</span>
    
    <span class="k">class</span> <span class="nc">RECT</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">Structure</span><span class="p">):</span>
        <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;top&#39;</span><span class="p">,</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;right&#39;</span><span class="p">,</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;bottom&#39;</span><span class="p">,</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">)]</span>

    <span class="k">class</span> <span class="nc">POINT</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">Structure</span><span class="p">):</span>
        <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">),</span>
                    <span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">,</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">)]</span>
    
    <span class="k">class</span> <span class="nc">Mouse</span><span class="p">(</span><span class="n">MouseDevice</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The Mouse class and related events represent a standard computer mouse device</span>
<span class="sd">        and the events a standard mouse can produce. Mouse position data is mapped to</span>
<span class="sd">        the coordinate space defined in the ioHub configuration file for the Display.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">WM_MOUSEFIRST</span> <span class="o">=</span> <span class="mh">0x0200</span>
        <span class="n">WM_MOUSEMOVE</span> <span class="o">=</span> <span class="mh">0x0200</span>
        <span class="n">WM_LBUTTONDOWN</span> <span class="o">=</span> <span class="mh">0x0201</span>
        <span class="n">WM_LBUTTONUP</span> <span class="o">=</span> <span class="mh">0x0202</span>
        <span class="n">WM_LBUTTONDBLCLK</span> <span class="o">=</span> <span class="mh">0x0203</span>
        <span class="n">WM_RBUTTONDOWN</span> <span class="o">=</span><span class="mh">0x0204</span>
        <span class="n">WM_RBUTTONUP</span> <span class="o">=</span> <span class="mh">0x0205</span>
        <span class="n">WM_RBUTTONDBLCLK</span> <span class="o">=</span> <span class="mh">0x0206</span>
        <span class="n">WM_MBUTTONDOWN</span> <span class="o">=</span> <span class="mh">0x0207</span>
        <span class="n">WM_MBUTTONUP</span> <span class="o">=</span> <span class="mh">0x0208</span>
        <span class="n">WM_MBUTTONDBLCLK</span> <span class="o">=</span> <span class="mh">0x0209</span>
        <span class="n">WM_MOUSEWHEEL</span> <span class="o">=</span> <span class="mh">0x020A</span>
        <span class="n">WM_MOUSELAST</span> <span class="o">=</span> <span class="mh">0x020A</span>
    
        <span class="n">WH_MOUSE</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">WH_MOUSE_LL</span> <span class="o">=</span> <span class="mi">14</span>
        <span class="n">WH_MAX</span> <span class="o">=</span> <span class="mi">15</span>
       
        <span class="n">_mouse_event_mapper</span><span class="o">=</span><span class="p">{</span>
            <span class="n">WM_MOUSEMOVE</span> <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_MOVE</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_NONE</span><span class="p">],</span>
            <span class="n">WM_RBUTTONDOWN</span> <span class="p">:</span> <span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_PRESSED</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_PRESS</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_RIGHT</span><span class="p">],</span>
            <span class="n">WM_MBUTTONDOWN</span> <span class="p">:</span> <span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_PRESSED</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_PRESS</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_MIDDLE</span><span class="p">],</span>
            <span class="n">WM_LBUTTONDOWN</span> <span class="p">:</span> <span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_PRESSED</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_PRESS</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_LEFT</span><span class="p">],</span>
            <span class="n">WM_RBUTTONUP</span> <span class="p">:</span> <span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_RELEASED</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_RELEASE</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_RIGHT</span><span class="p">],</span>
            <span class="n">WM_MBUTTONUP</span> <span class="p">:</span> <span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_RELEASED</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_RELEASE</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_MIDDLE</span><span class="p">],</span>
            <span class="n">WM_LBUTTONUP</span> <span class="p">:</span> <span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_RELEASED</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_RELEASE</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_LEFT</span><span class="p">],</span>
            <span class="n">WM_RBUTTONDBLCLK</span> <span class="p">:</span> <span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_DOUBLE_CLICK</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_DOUBLE_CLICK</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_RIGHT</span><span class="p">],</span>
            <span class="n">WM_MBUTTONDBLCLK</span> <span class="p">:</span> <span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_DOUBLE_CLICK</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_DOUBLE_CLICK</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_MIDDLE</span><span class="p">],</span>
            <span class="n">WM_LBUTTONDBLCLK</span> <span class="p">:</span> <span class="p">[</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_DOUBLE_CLICK</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_DOUBLE_CLICK</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_LEFT</span><span class="p">],</span>
            <span class="n">WM_MOUSEWHEEL</span> <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_WHEEL_DOWN</span><span class="p">,</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_NONE</span><span class="p">]</span>
        <span class="p">}</span>
    
        <span class="n">slots</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;_user32&#39;</span><span class="p">,</span><span class="s">&#39;_original_system_cursor_clipping_rect&#39;</span><span class="p">,</span><span class="s">&#39;_clipRectsForDisplayID&#39;</span><span class="p">]</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>          
            <span class="n">MouseDevice</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;dconfig&#39;</span><span class="p">])</span>
    
            <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">=</span><span class="n">ctypes</span><span class="o">.</span><span class="n">windll</span><span class="o">.</span><span class="n">user32</span>
    
            <span class="bp">self</span><span class="o">.</span><span class="n">getSystemCursorVisibility</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_clipRectsForDisplayID</span><span class="o">=</span><span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_original_system_cursor_clipping_rect</span><span class="o">=</span><span class="n">RECT</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">GetClipCursor</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_original_system_cursor_clipping_rect</span><span class="p">))</span>

<div class="viewcode-block" id="Mouse.lockMouseToDisplayID"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.Mouse.lockMouseToDisplayID">[docs]</a>        <span class="k">def</span> <span class="nf">lockMouseToDisplayID</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">display_id</span><span class="p">):</span>
            <span class="n">MouseDevice</span><span class="o">.</span><span class="n">lockMouseToDisplayID</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">display_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">display_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">display_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clipRectsForDisplayID</span><span class="p">:</span>
                    <span class="n">screen</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_device</span><span class="o">.</span><span class="n">getConfiguration</span><span class="p">()[</span><span class="s">&#39;runtime_info&#39;</span><span class="p">]</span>              
                    <span class="k">if</span> <span class="n">screen</span><span class="p">:</span>
                        <span class="n">left</span><span class="p">,</span><span class="n">top</span><span class="p">,</span><span class="n">right</span><span class="p">,</span><span class="n">bottom</span><span class="o">=</span><span class="n">screen</span><span class="p">[</span><span class="s">&#39;bounds&#39;</span><span class="p">]</span>
                        <span class="n">right</span><span class="o">=</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
                        <span class="n">bottom</span><span class="o">=</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">(</span><span class="n">bottom</span><span class="p">)</span>
                        <span class="n">left</span><span class="o">=</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
                        <span class="n">top</span><span class="o">=</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_long</span><span class="p">(</span><span class="n">top</span><span class="p">)</span>
                        <span class="n">clip_rect</span><span class="o">=</span><span class="n">RECT</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="n">top</span><span class="p">,</span><span class="n">right</span><span class="p">,</span><span class="n">bottom</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_clipRectsForDisplayID</span><span class="p">[</span><span class="n">display_id</span><span class="p">]</span><span class="o">=</span><span class="n">clip_rect</span><span class="p">,</span><span class="n">ioHub</span><span class="o">.</span><span class="n">RectangleBorder</span><span class="p">(</span><span class="n">clip_rect</span><span class="o">.</span><span class="n">left</span><span class="p">,</span><span class="n">clip_rect</span><span class="o">.</span><span class="n">top</span><span class="p">,</span><span class="n">clip_rect</span><span class="o">.</span><span class="n">right</span><span class="p">,</span><span class="n">clip_rect</span><span class="o">.</span><span class="n">bottom</span><span class="p">)</span>

                <span class="n">clip_rect</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clipRectsForDisplayID</span><span class="p">[</span><span class="n">display_id</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>    
                <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">ClipCursor</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">clip_rect</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c">#ioHub.print2err(&quot;Setting Mouse ClipRect: None&quot;)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">ClipCursor</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">None</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clipRectsForDisplayID</span><span class="p">:</span>
                    <span class="n">clip_rect</span><span class="o">=</span><span class="n">RECT</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">GetClipCursor</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">clip_rect</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_clipRectsForDisplayID</span><span class="p">[</span><span class="bp">None</span><span class="p">]</span><span class="o">=</span><span class="n">clip_rect</span><span class="p">,</span><span class="n">ioHub</span><span class="o">.</span><span class="n">RectangleBorder</span><span class="p">(</span><span class="n">clip_rect</span><span class="o">.</span><span class="n">left</span><span class="p">,</span><span class="n">clip_rect</span><span class="o">.</span><span class="n">top</span><span class="p">,</span><span class="n">clip_rect</span><span class="o">.</span><span class="n">right</span><span class="p">,</span><span class="n">clip_rect</span><span class="o">.</span><span class="n">bottom</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clipRectsForDisplayID</span><span class="p">[</span><span class="n">display_id</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            </div>
        <span class="k">def</span> <span class="nf">setPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">display_index</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Sets the current position of the ioHub Mouse Device. Mouse position ( pos ) should be specified in</span>
<span class="sd">            Display coordinate units, with 0,0 being the center of the screen. If you would like the OS system</span>
<span class="sd">            mouse position to also be updated, set updateSystemMousePosition to True (the default). Otherwise,</span>
<span class="sd">            set it to False. When the system mouse position is updated, your position ( pos ) is converted</span>
<span class="sd">            to the associated screen pixel position expected by the OS.</span>
<span class="sd">    </span>
<span class="sd">            Args:</span>
<span class="sd">                 pos ( (x,y) list or tuple ): The position, in Display coordinate space, to set the mouse position too.</span>
<span class="sd">                 </span>
<span class="sd">                 updateSystemMousePosition (bool): True = the OS mouse position will also be updated, False = it will not.</span>
<span class="sd">            </span>
<span class="sd">            Return:</span>
<span class="sd">                tuple: new (x,y) position of mouse in Display coordinate space.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">long</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">long</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
                <span class="n">display</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_device</span>
                <span class="n">current_display_index</span><span class="o">=</span><span class="n">display</span><span class="o">.</span><span class="n">getIndex</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">display_index</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">display_index</span><span class="o">=</span><span class="n">current_display_index</span>

                <span class="k">if</span> <span class="n">display_index</span><span class="o">==-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot; !!! Display Index -1 received by mouse.setPosition. !!!&quot;</span><span class="p">)</span>
                    <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot; mouse.setPos did not update mouse pos&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
                    
                <span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="o">=</span><span class="n">display</span><span class="o">.</span><span class="n">displayCoord2Pixel</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">display_index</span><span class="p">)</span>

                <span class="n">result</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_validateMousePosition</span><span class="p">((</span><span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="p">),</span><span class="n">display_index</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span><span class="bp">True</span><span class="p">:</span>
                    <span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="o">=</span><span class="n">result</span>
                
                <span class="n">mouse_display_index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getDisplayIndexForMousePosition</span><span class="p">((</span><span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="p">))</span>
                
                <span class="k">if</span> <span class="n">mouse_display_index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot; !!! getDisplayIndexForMousePosition returned -1 in mouse.setPosition. !!!&quot;</span><span class="p">)</span>
                    <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot; mouse.setPos did not update mouse pos&quot;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">mouse_display_index</span><span class="o">!=</span><span class="n">display_index</span><span class="p">:</span>
                    <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot; !!! requested display_index {0} != mouse_pos_index {1}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                    <span class="n">display_index</span><span class="p">,</span><span class="n">mouse_display_index</span><span class="p">))</span>
                    <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot; mouse.setPos did not update mouse pos&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>                    
                    <span class="bp">self</span><span class="o">.</span><span class="n">_lastPosition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">=</span><span class="n">px</span><span class="p">,</span><span class="n">py</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">_last_display_index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span><span class="o">=</span><span class="n">mouse_display_index</span>
                
                    <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">SetCursorPos</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">px</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">py</span><span class="p">))</span>
                    <span class="c">#ioHub.print2err(&quot; mouse.setPos updated to {0}&quot;.format((px,py)))</span>
                    
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
    
        <span class="k">def</span> <span class="nf">getSystemCursorVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns whether the system cursor is visible on the currently active Window.</span>
<span class="sd">            </span>
<span class="sd">            Args: </span>
<span class="sd">                None</span>
<span class="sd">                </span>
<span class="sd">            Returns: </span>
<span class="sd">                bool: True if system cursor is visible on currently active Window. False otherwise.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c">#  &gt;&gt; WIN32_ONLY</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">ShowCursor</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>    
            <span class="bp">self</span><span class="o">.</span><span class="n">_isVisible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">ShowCursor</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="c">#  &lt;&lt; WIN32_ONLY</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isVisible</span> <span class="o">&gt;=</span> <span class="mi">0</span>
     
        <span class="k">def</span> <span class="nf">setSystemCursorVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Set whether the system cursor is visible on the currently active Window.</span>
<span class="sd">            </span>
<span class="sd">            Args:</span>
<span class="sd">                v (bool): True = make system cursor visible. False = Hide system cursor</span>
<span class="sd">            </span>
<span class="sd">            Returns:</span>
<span class="sd">                (bool): True if system cursor is visible on currently active Window. False otherwise.</span>
<span class="sd">    </span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c">#  &gt;&gt; WIN32_ONLY</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_isVisible</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">ShowCursor</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="c">#  &lt;&lt; WIN32_ONLY</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isVisible</span> <span class="o">&gt;=</span> <span class="mi">0</span>


        <span class="k">def</span> <span class="nf">_validateMousePosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixel_pos</span><span class="p">,</span><span class="n">display_index</span><span class="p">):</span>
            <span class="n">left</span><span class="p">,</span><span class="n">top</span><span class="p">,</span><span class="n">right</span><span class="p">,</span><span class="n">bottom</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_device</span><span class="o">.</span><span class="n">getRuntimeInfoByIndex</span><span class="p">(</span><span class="n">display_index</span><span class="p">)[</span><span class="s">&#39;bounds&#39;</span><span class="p">]</span>
            <span class="n">mx</span><span class="p">,</span><span class="n">my</span><span class="o">=</span><span class="n">pixel_pos</span>
            <span class="n">mousePositionNeedsUpdate</span><span class="o">=</span><span class="bp">False</span>
            
            <span class="k">if</span> <span class="n">mx</span> <span class="o">&lt;</span> <span class="n">left</span><span class="p">:</span>
                <span class="n">mx</span><span class="o">=</span><span class="n">left</span>
                <span class="n">mousePositionNeedsUpdate</span><span class="o">=</span><span class="bp">True</span>
            <span class="k">elif</span> <span class="n">mx</span> <span class="o">&gt;=</span> <span class="n">right</span><span class="p">:</span>
                <span class="n">mx</span><span class="o">=</span><span class="n">right</span><span class="o">-</span><span class="mi">1</span>
                <span class="n">mousePositionNeedsUpdate</span><span class="o">=</span><span class="bp">True</span>
                
            <span class="k">if</span> <span class="n">my</span> <span class="o">&lt;</span> <span class="n">top</span><span class="p">:</span>
                <span class="n">my</span><span class="o">=</span><span class="n">top</span>
                <span class="n">mousePositionNeedsUpdate</span><span class="o">=</span><span class="bp">True</span>
            <span class="k">elif</span> <span class="n">my</span> <span class="o">&gt;=</span> <span class="n">bottom</span><span class="p">:</span>
                <span class="n">my</span><span class="o">=</span><span class="n">bottom</span><span class="o">-</span><span class="mi">1</span>
                <span class="n">mousePositionNeedsUpdate</span><span class="o">=</span><span class="bp">True</span>
            
            <span class="k">if</span> <span class="n">mousePositionNeedsUpdate</span><span class="p">:</span> 
                <span class="k">return</span> <span class="n">mx</span><span class="p">,</span><span class="n">my</span>
            
            <span class="k">return</span> <span class="bp">True</span>
            
        <span class="k">def</span> <span class="nf">_nativeEventCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isReportingEvents</span><span class="p">():</span>
                <span class="n">logged_time</span><span class="o">=</span><span class="n">currentSec</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_scrollPositionY</span><span class="o">+=</span> <span class="n">event</span><span class="o">.</span><span class="n">Wheel</span>
                <span class="n">event</span><span class="o">.</span><span class="n">WheelAbsolute</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_scrollPositionY</span>

                <span class="n">display_index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getDisplayIndexForMousePosition</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">Position</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">display_index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_display_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">display_index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_last_display_index</span>
                    <span class="k">else</span><span class="p">:</span>    
                        <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot;!!! _nativeEventCallback error: mouse event pos {0} not in any display bounds!!!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">Position</span><span class="p">))</span>
                        <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot;!!!  -&gt; SKIPPING EVENT&quot;</span><span class="p">)</span>
                        <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot;===============&quot;</span><span class="p">)</span>
                        <span class="k">return</span> <span class="bp">True</span>
                
                <span class="n">result</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_validateMousePosition</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">Position</span><span class="p">,</span><span class="n">display_index</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="bp">True</span><span class="p">:</span>
                    <span class="c">#ioHub.print2err(&quot;!!! _validateMousePosition made ajustment: {0} to {1}&quot;.format(</span>
                    <span class="c">#                                    event.Position,result))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">SetCursorPos</span><span class="p">(</span><span class="o">*</span><span class="n">result</span><span class="p">)</span>   
                    <span class="n">event</span><span class="o">.</span><span class="n">Position</span><span class="o">=</span><span class="n">result</span>
                    <span class="n">display_index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getDisplayIndexForMousePosition</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">Position</span><span class="p">)</span>

                <span class="n">mx</span><span class="p">,</span><span class="n">my</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">Position</span>                
                <span class="n">event</span><span class="o">.</span><span class="n">DisplayIndex</span><span class="o">=</span><span class="n">display_index</span>                
                <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_device</span><span class="o">.</span><span class="n">pixel2DisplayCoord</span><span class="p">(</span><span class="n">mx</span><span class="p">,</span><span class="n">my</span><span class="p">,</span><span class="n">event</span><span class="o">.</span><span class="n">DisplayIndex</span><span class="p">)</span>  
            
                <span class="c">#ioHub.print2err(&quot;Going to Update mousePosition: {0} =&gt; {1} on D {2}&quot;.format(</span>
                <span class="c">#                    event.Position,p,event.DisplayIndex))</span>

                <span class="n">event</span><span class="o">.</span><span class="n">Position</span><span class="o">=</span><span class="n">p</span>
                
                <span class="bp">self</span><span class="o">.</span><span class="n">_lastPosition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">Position</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_last_display_index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span><span class="o">=</span><span class="n">display_index</span>
 
                <span class="c">#ioHub.print2err(&quot;===============&quot;)</span>
                
                <span class="c"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
                
                <span class="n">bstate</span><span class="p">,</span><span class="n">etype</span><span class="p">,</span><span class="n">bnum</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_mouse_event_mapper</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">bnum</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_NONE</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">activeButtons</span><span class="p">[</span><span class="n">bnum</span><span class="p">]</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bstate</span><span class="o">==</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_PRESSED</span><span class="p">)</span>
    
                <span class="n">abuttonSum</span><span class="o">=</span><span class="mi">0</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">activeButtons</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                    <span class="n">abuttonSum</span><span class="o">+=</span><span class="n">k</span><span class="o">*</span><span class="n">v</span>
    
                <span class="n">event</span><span class="o">.</span><span class="n">ActiveButtons</span><span class="o">=</span><span class="n">abuttonSum</span>
    
                <span class="bp">self</span><span class="o">.</span><span class="n">_addNativeEventToBuffer</span><span class="p">((</span><span class="n">logged_time</span><span class="p">,</span><span class="n">event</span><span class="p">))</span>
    
                <span class="bp">self</span><span class="o">.</span><span class="n">_last_callback_time</span><span class="o">=</span><span class="n">logged_time</span>
                

            <span class="c"># pyHook require the callback to return True to inform the windows </span>
            <span class="c"># low level hook functionality to pass the event on.</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="k">def</span> <span class="nf">_getIOHubEventObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">native_event_data</span><span class="p">):</span>
            <span class="n">logged_time</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="n">native_event_data</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">Position</span>
            <span class="n">px</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">py</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    
            <span class="n">bstate</span><span class="p">,</span><span class="n">etype</span><span class="p">,</span><span class="n">bnum</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_mouse_event_mapper</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span>
    
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">Message</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">WM_MOUSEWHEEL</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">Wheel</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">etype</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_WHEEL_UP</span>
    
            <span class="n">confidence_interval</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="n">delay</span><span class="o">=</span><span class="mf">0.0</span>
    
            <span class="c"># From MSDN: http://msdn.microsoft.com/en-us/library/windows/desktop/ms644939(v=vs.85).aspx</span>
            <span class="c"># The time is a long integer that specifies the elapsed time, in milliseconds, from the time the system was started to the time the message was </span>
            <span class="c"># created (that is, placed in the thread&#39;s message queue).REMARKS: The return value from the GetMessageTime function does not necessarily increase</span>
            <span class="c"># between subsequent messages, because the value wraps to zero if the timer count exceeds the maximum value for a long integer. To calculate time</span>
            <span class="c"># delays between messages, verify that the time of the second message is greater than the time of the first message; then, subtract the time of the</span>
            <span class="c"># first message from the time of the second message.</span>
            <span class="n">device_time</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">Time</span><span class="o">/</span><span class="mf">1000.0</span> <span class="c"># convert to sec</span>
            
            <span class="n">hubTime</span> <span class="o">=</span> <span class="n">logged_time</span> <span class="c">#TODO correct mouse times to factor in offset.</span>
    
            <span class="n">r</span><span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">Computer</span><span class="o">.</span><span class="n">_getNextEventID</span><span class="p">(),</span><span class="n">etype</span><span class="p">,</span><span class="n">device_time</span><span class="p">,</span><span class="n">logged_time</span><span class="p">,</span><span class="n">hubTime</span><span class="p">,</span>
                        <span class="n">confidence_interval</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">DisplayIndex</span><span class="p">,</span> <span class="n">bstate</span><span class="p">,</span> <span class="n">bnum</span><span class="p">,</span><span class="n">event</span><span class="o">.</span><span class="n">ActiveButtons</span><span class="p">,</span>
                        <span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">,</span><span class="n">event</span><span class="o">.</span><span class="n">Wheel</span><span class="p">,</span><span class="n">event</span><span class="o">.</span><span class="n">WheelAbsolute</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">Window</span><span class="p">]</span>    
            <span class="k">return</span> <span class="n">r</span>

        <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_user32</span><span class="o">.</span><span class="n">ClipCursor</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_original_system_cursor_clipping_rect</span><span class="p">))</span>
            <span class="n">MouseDevice</span><span class="o">.</span><span class="n">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            
<span class="k">elif</span> <span class="n">Computer</span><span class="o">.</span><span class="n">system</span> <span class="o">==</span> <span class="s">&#39;Linux&#39;</span><span class="p">:</span>
<span class="c">#    global Mouse</span>
<div class="viewcode-block" id="Mouse"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.Mouse">[docs]</a>    <span class="k">class</span> <span class="nc">Mouse</span><span class="p">(</span><span class="n">MouseDevice</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The Mouse class and related events represent a standard computer mouse device</span>
<span class="sd">        and the events a standard mouse can produce. Mouse position data is mapped to</span>
<span class="sd">        the coordinate space defined in the ioHub configuration file for the Display.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>          
            <span class="n">MouseDevice</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;dconfig&#39;</span><span class="p">])</span>
            
            <span class="c">#self.getSystemCursorVisibility()</span>
            

<div class="viewcode-block" id="Mouse.setPosition"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.Mouse.setPosition">[docs]</a>        <span class="k">def</span> <span class="nf">setPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span> <span class="n">updateSystemMousePosition</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Sets the current position of the ioHub Mouse Device. Mouse position ( pos ) should be specified in</span>
<span class="sd">            Display coordinate units, with 0,0 being the center of the screen. If you would like the OS system</span>
<span class="sd">            mouse position to also be updated, set updateSystemMousePosition to True (the default). Otherwise,</span>
<span class="sd">            set it to False. When the system mouse position is updated, your position ( pos ) is converted</span>
<span class="sd">            to the associated screen pixel position expected by the OS.</span>
<span class="sd">    </span>
<span class="sd">            Args:</span>
<span class="sd">                 pos: The position, in Display coordinate space, to set the mouse position too.</span>
<span class="sd">                 updateSystemMousePosition: True = the OS mouse position will also be updated,</span>
<span class="sd">                                            False = it will not.</span>
<span class="sd">            Return (tuple): new (x,y) position of mouse in Display coordinate space.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">long</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">long</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lastPosition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">=</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    
            <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&#39;Mouse.setPosition not implemented on Linux yet.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
            </div>
<div class="viewcode-block" id="Mouse.getSystemCursorVisibility"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.Mouse.getSystemCursorVisibility">[docs]</a>        <span class="k">def</span> <span class="nf">getSystemCursorVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns whether the system cursor is visible on the currently active Window.</span>
<span class="sd">            Args: None</span>
<span class="sd">            Returns (bool): True if system cursor is visible on currently active Window. False otherwise.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c">#  &gt;&gt; WIN32_ONLY</span>
            <span class="c">#v=self._user32.ShowCursor(False)    </span>
            <span class="c">#self._isVisible = self._user32.ShowCursor(True)</span>
            <span class="c">#  &lt;&lt; WIN32_ONLY</span>
            <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot;Mouse.getSystemCursorVisibility is not currently supported on Linux.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span><span class="c">#self._isVisible &gt;= 0</span>
 </div>
<div class="viewcode-block" id="Mouse.setSystemCursorVisibility"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.Mouse.setSystemCursorVisibility">[docs]</a>        <span class="k">def</span> <span class="nf">setSystemCursorVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Set whether the system cursor is visible on the currently active Window.</span>
<span class="sd">            Args:</span>
<span class="sd">                v (bool): True = make system cursor visible. False = Hide system cursor</span>
<span class="sd">            Returns (bool): True if system cursor is visible on currently active Window. False otherwise.</span>
<span class="sd">    </span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c">#  &gt;&gt; WIN32_ONLY</span>
            <span class="c">#self._isVisible=self._user32.ShowCursor(v)</span>
            <span class="c">#  &lt;&lt; WIN32_ONLY</span>
            <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot;Mouse.setSystemCursorVisibility is not currently supported on Linux.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span><span class="c">#self._isVisible &gt;= 0    </span>
       
       </div>
        <span class="k">def</span> <span class="nf">_nativeEventCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isReportingEvents</span><span class="p">():</span>
                    <span class="n">logged_time</span><span class="o">=</span><span class="n">currentSec</span><span class="p">()</span>
        
                    <span class="bp">self</span><span class="o">.</span><span class="n">_scrollPositionY</span><span class="o">+=</span> <span class="n">event</span><span class="o">.</span><span class="n">Wheel</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">WheelAbsolute</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_scrollPositionY</span>
        
                    <span class="n">ioHub</span><span class="o">.</span><span class="n">print2err</span><span class="p">(</span><span class="s">&quot;UPDATE Linux _getIOHubEventObject to include event.DisplayIndex logic.&quot;</span><span class="p">)</span>            
                    <span class="n">event</span><span class="o">.</span><span class="n">DisplayIndex</span><span class="o">=</span><span class="mi">0</span>
    
                    <span class="n">p</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_device</span><span class="o">.</span><span class="n">pixel2DisplayCoord</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">Position</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">event</span><span class="o">.</span><span class="n">Position</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">Position</span><span class="o">=</span><span class="n">p</span>
    
                    <span class="bp">self</span><span class="o">.</span><span class="n">_lastPosition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_position</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">Position</span>
    
                    <span class="bp">self</span><span class="o">.</span><span class="n">_last_display_index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_display_index</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">DisplayIndex</span>
     
                    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">ioHubButtonID</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_NONE</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">activeButtons</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">ioHubButtonID</span><span class="p">]</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">ioHubButtonState</span><span class="o">==</span><span class="n">MouseConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_STATE_PRESSED</span><span class="p">)</span>
        
                    <span class="n">abuttonSum</span><span class="o">=</span><span class="mi">0</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">activeButtons</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                        <span class="n">abuttonSum</span><span class="o">+=</span><span class="n">k</span><span class="o">*</span><span class="n">v</span>
        
                    <span class="n">event</span><span class="o">.</span><span class="n">ActiveButtons</span><span class="o">=</span><span class="n">abuttonSum</span>
        
                    <span class="bp">self</span><span class="o">.</span><span class="n">_addNativeEventToBuffer</span><span class="p">((</span><span class="n">logged_time</span><span class="p">,</span><span class="n">event</span><span class="p">))</span>
        
                    <span class="bp">self</span><span class="o">.</span><span class="n">_last_callback_time</span><span class="o">=</span><span class="n">logged_time</span>
        
    
        <span class="k">def</span> <span class="nf">_getIOHubEventObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">native_event_data</span><span class="p">):</span>
            <span class="n">logged_time</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="n">native_event_data</span>
            <span class="c">#import ioHub</span>
            <span class="c">#ioHub.print2err(&quot;Mouse event start....&quot;)            </span>
            <span class="n">px</span><span class="p">,</span><span class="n">py</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">Position</span>
    
            <span class="n">confidence_interval</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="n">delay</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="n">hubTime</span> <span class="o">=</span> <span class="n">logged_time</span> <span class="c">#TODO correct mouse times to factor in offset.</span>
    
            <span class="n">r</span><span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>
                <span class="n">Computer</span><span class="o">.</span><span class="n">_getNextEventID</span><span class="p">(),</span>
                <span class="n">event</span><span class="o">.</span><span class="n">ioHubEventID</span><span class="p">,</span>
                <span class="n">event</span><span class="o">.</span><span class="n">Time</span><span class="p">,</span>
                <span class="n">logged_time</span><span class="p">,</span>
                <span class="n">hubTime</span><span class="p">,</span>
                <span class="n">confidence_interval</span><span class="p">,</span> 
                <span class="n">delay</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span> <span class="c"># filtered by ID (always 0 right now) </span>
                <span class="n">event</span><span class="o">.</span><span class="n">DisplayIndex</span><span class="p">,</span>
                <span class="n">event</span><span class="o">.</span><span class="n">ioHubButtonState</span><span class="p">,</span> 
                <span class="n">event</span><span class="o">.</span><span class="n">ioHubButtonID</span><span class="p">,</span>
                <span class="n">event</span><span class="o">.</span><span class="n">ActiveButtons</span><span class="p">,</span> 
                <span class="n">px</span><span class="p">,</span> 
                <span class="n">py</span><span class="p">,</span>
                <span class="n">event</span><span class="o">.</span><span class="n">Wheel</span><span class="p">,</span>
                <span class="n">event</span><span class="o">.</span><span class="n">WheelAbsolute</span><span class="p">,</span> 
                <span class="n">event</span><span class="o">.</span><span class="n">Window</span><span class="p">]</span>
             
            <span class="c">#ioHub.print2err(&quot;Mouse event built.\n-----------------&quot;)</span>
            
            <span class="k">return</span> <span class="n">r</span>
</div>
<span class="k">else</span><span class="p">:</span> <span class="c"># assume OS X</span>
    <span class="kn">import</span> <span class="nn">_osx</span>
    <span class="k">print</span> <span class="s">&#39;Mouse not implemented on OS X yet.&#39;</span>

<span class="c">############# OS Independent Mouse Event Classes ####################</span>

<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">DeviceEvent</span>

<div class="viewcode-block" id="MouseInputEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.MouseInputEvent">[docs]</a><span class="k">class</span> <span class="nc">MouseInputEvent</span><span class="p">(</span><span class="n">DeviceEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The MouseInputEvent is an abstract class that is the parent of all MouseInputEvent types</span>
<span class="sd">    that are supported in the ioHub. Mouse position is mapped to the coordinate space</span>
<span class="sd">    defined in the ioHub configuration file for the Display.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">PARENT_DEVICE</span><span class="o">=</span><span class="n">Mouse</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE_INPUT&#39;</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_INPUT</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">EVENT_TYPE_STRING</span>

    <span class="n">_newDataTypes</span> <span class="o">=</span> <span class="p">[</span>
                     <span class="p">(</span><span class="s">&#39;display_id&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">uint8</span><span class="p">),</span>     <span class="c"># gives the display index that the mouse was over for the event.</span>
                     <span class="p">(</span><span class="s">&#39;button_state&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">uint8</span><span class="p">),</span>    <span class="c"># 1 if button is pressed, 0 if button is released</span>
                     <span class="p">(</span><span class="s">&#39;button_id&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">uint8</span><span class="p">),</span>       <span class="c"># 1, 2,or 4, representing left, right, and middle buttons</span>
                     <span class="p">(</span><span class="s">&#39;pressed_buttons&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">uint8</span><span class="p">),</span> <span class="c"># sum of currently active button int values</span>

                     <span class="p">(</span><span class="s">&#39;x_position&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">int16</span><span class="p">),</span>    <span class="c"># x position of the position when the event occurred</span>
                     <span class="p">(</span><span class="s">&#39;y_position&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">int16</span><span class="p">),</span>    <span class="c"># y position of the position when the event occurred</span>

                     <span class="p">(</span><span class="s">&#39;wheel_change&#39;</span><span class="p">,</span> <span class="n">N</span><span class="o">.</span><span class="n">int8</span><span class="p">),</span>  <span class="c"># vertical scroll wheel position change when the event occurred</span>
                     <span class="p">(</span><span class="s">&#39;wheel_value&#39;</span><span class="p">,</span> <span class="n">N</span><span class="o">.</span><span class="n">int16</span><span class="p">),</span>  <span class="c"># vertical scroll wheel abs. position when the event occurred</span>

                     <span class="p">(</span><span class="s">&#39;window_id&#39;</span><span class="p">,</span><span class="n">N</span><span class="o">.</span><span class="n">uint64</span><span class="p">)</span>      <span class="c"># window ID that the mouse was over when the event occurred</span>
                                                <span class="c"># (window does not need to have focus)</span>
                    <span class="p">]</span>
    <span class="c"># TODO: Determine real maximum key name string and modifiers string</span>
    <span class="c"># lengths and set appropriately.</span>

    <span class="n">__slots__</span><span class="o">=</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">_newDataTypes</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c"># The id of the display that the mouse was over when the event occurred.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_id</span><span class="o">=</span><span class="bp">None</span>        
        
        <span class="c">#: 1 if button is pressed, 0 if button is released</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_state</span><span class="o">=</span><span class="bp">None</span>

        <span class="c">#: MouseConstants.MOUSE_BUTTON_LEFT, MouseConstants.MOUSE_BUTTON_RIGHT</span>
        <span class="c">#: and MouseConstants.MOUSE_BUTTON_MIDDLE are int constants </span>
        <span class="c">#: representing left, right, and middle buttons of the mouse.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_id</span><span class="o">=</span><span class="bp">None</span>

        <span class="c">#: &#39;All&#39; currently pressed button id&#39;s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressed_buttons</span><span class="o">=</span><span class="bp">None</span>

        <span class="c">#: x position of the position when the event occurred; in display coordinate space</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_position</span><span class="o">=</span><span class="bp">None</span>

        <span class="c">#: y position of the position when the event occurred; in display coordinate space</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_position</span><span class="o">=</span><span class="bp">None</span>
        
        <span class="c">#: vertical scroll wheel position change when the event occurred</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wheel_change</span><span class="o">=</span><span class="bp">None</span>

        <span class="c">#: vertical scroll wheel absolute position when the event occurred</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wheel_value</span><span class="o">=</span><span class="bp">None</span>

        <span class="c">#: window ID that the mouse was over when the event occurred</span>
        <span class="c">#: (window does not need to have focus)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window_id</span><span class="o">=</span><span class="bp">None</span>

        <span class="n">DeviceEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MouseMoveEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.MouseMoveEvent">[docs]</a><span class="k">class</span> <span class="nc">MouseMoveEvent</span><span class="p">(</span><span class="n">MouseInputEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MouseMoveEvents occur when the mouse position changes. Mouse position is</span>
<span class="sd">    mapped to the coordinate space defined in the ioHub configuration file </span>
<span class="sd">    for the Display.</span>
<span class="sd">    </span>
<span class="sd">    Event Type ID: EventConstants.MOUSE_MOVE</span>
<span class="sd">    Event Type String: &#39;MOUSE_MOVE&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE_MOVE&#39;</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_MOVE</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">IOHUB_DATA_TABLE</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<span class="k">class</span> <span class="nc">MouseWheelEvent</span><span class="p">(</span><span class="n">MouseInputEvent</span><span class="p">):</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE_WHEEL&#39;</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_WHEEL</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">IOHUB_DATA_TABLE</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        :rtype : MouseWheelEvent</span>
<span class="sd">        :param args:</span>
<span class="sd">        :param kwargs:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="MouseWheelUpEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.MouseWheelUpEvent">[docs]</a><span class="k">class</span> <span class="nc">MouseWheelUpEvent</span><span class="p">(</span><span class="n">MouseWheelEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MouseWheelUpEvent&#39;s are generated when the vertical scroll wheel on the </span>
<span class="sd">    Mouse Device (if it has one) is turned in the direction toward the front </span>
<span class="sd">    of the mouse. Horizontal scrolling is not currently supported.</span>
<span class="sd">    Each MouseWheelUpEvent provides the number of units the wheel was turned </span>
<span class="sd">    ( +1 ) as well as the absolute scroll value for the mouse, which is an </span>
<span class="sd">    ioHub Mouse attribute that is simply modified by the change value of</span>
<span class="sd">    MouseWheelUpEvent and MouseWheelDownEvent types.</span>

<span class="sd">    Event Type ID: EventConstants.MOUSE_WHEEL_UP</span>
<span class="sd">    Event Type String: &#39;MOUSE_WHEEL_UP&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE_WHEEL_UP&#39;</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_WHEEL_UP</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">IOHUB_DATA_TABLE</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        :rtype : MouseWheelUpEvent</span>
<span class="sd">        :param args:</span>
<span class="sd">        :param kwargs:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MouseWheelEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MouseWheelDownEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.MouseWheelDownEvent">[docs]</a><span class="k">class</span> <span class="nc">MouseWheelDownEvent</span><span class="p">(</span><span class="n">MouseWheelEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MouseWheelDownEvent&#39;s are generated when the vertical scroll wheel on the </span>
<span class="sd">    Mouse Device (if it has one) is turned in the direction toward the back</span>
<span class="sd">    of the mouse. Horizontal scrolling is not currently supported.</span>
<span class="sd">    Each MouseWheelDownEvent provides the number of units the wheel was turned </span>
<span class="sd">    as a negative value ( -1 ) as well as the absolute scroll value for the mouse,</span>
<span class="sd">    which is an ioHub Mouse attribute that is simply modified by the change value</span>
<span class="sd">    of MouseWheelUpEvent and MouseWheelDownEvent types.</span>
<span class="sd">    </span>
<span class="sd">    Event Type ID: EventConstants.MOUSE_WHEEL_DOWN</span>
<span class="sd">    Event Type String: &#39;MOUSE_WHEEL_DOWN&#39;    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE_WHEEL_DOWN&#39;</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_WHEEL_DOWN</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">IOHUB_DATA_TABLE</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        :rtype : MouseWheelDownEvent</span>
<span class="sd">        :param args:</span>
<span class="sd">        :param kwargs:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MouseWheelEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<span class="k">class</span> <span class="nc">MouseButtonEvent</span><span class="p">(</span><span class="n">MouseInputEvent</span><span class="p">):</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE_BUTTON&#39;</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">IOHUB_DATA_TABLE</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        :rtype : MouseButtonEvent</span>
<span class="sd">        :param args:</span>
<span class="sd">        :param kwargs:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="MouseButtonPressEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.MouseButtonPressEvent">[docs]</a><span class="k">class</span> <span class="nc">MouseButtonPressEvent</span><span class="p">(</span><span class="n">MouseButtonEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MouseButtonPressEvent&#39;s are created when a button on the mouse is pressed. </span>
<span class="sd">    The button_state of the event will equal MouseConstants.MOUSE_BUTTON_STATE_PRESSED,</span>
<span class="sd">    and the button that was pressed (button_id) will be MouseConstants.MOUSE_BUTTON_ID_LEFT,</span>
<span class="sd">    MouseConstants.MOUSE_BUTTON_ID_RIGHT, or MouseConstants.MOUSE_BUTTON_ID_MIDDLE, </span>
<span class="sd">    assuming you have a 3 button mouse.</span>

<span class="sd">    To get the current state of all three buttons on the Mouse Device, </span>
<span class="sd">    the pressed_buttons attribute can be read, which tracks the state of all three</span>
<span class="sd">    mouse buttons as an int that is equal to the sum of any pressed button id&#39;s </span>
<span class="sd">    ( MouseConstants.MOUSE_BUTTON_ID_LEFT,  MouseConstants.MOUSE_BUTTON_ID_RIGHT, or</span>
<span class="sd">    MouseConstants.MOUSE_BUTTON_ID_MIDDLE ).</span>

<span class="sd">    To tell if a given mouse button was depressed when the event occurred, regardless of which</span>
<span class="sd">    button triggered the event, you can use the following::</span>

<span class="sd">        isButtonPressed = event.pressed_buttons &amp; MouseConstants.MOUSE_BUTTON_ID_xxx == MouseConstants.MOUSE_BUTTON_ID_xxx</span>

<span class="sd">    where xxx is LEFT, RIGHT, or MIDDLE.</span>

<span class="sd">    For example, if at the time of the event both the left and right mouse buttons</span>
<span class="sd">    were in a pressed state::</span>

<span class="sd">        buttonToCheck=MouseConstants.MOUSE_BUTTON_ID_RIGHT</span>
<span class="sd">        isButtonPressed = event.pressed_buttons &amp; buttonToCheck == buttonToCheck</span>

<span class="sd">        print isButtonPressed</span>

<span class="sd">        &gt;&gt; True</span>

<span class="sd">        buttonToCheck=MouseConstants.MOUSE_BUTTON_ID_LEFT</span>
<span class="sd">        isButtonPressed = event.pressed_buttons &amp; buttonToCheck == buttonToCheck</span>

<span class="sd">        print isButtonPressed</span>

<span class="sd">        &gt;&gt; True</span>

<span class="sd">        buttonToCheck=MouseConstants.MOUSE_BUTTON_ID_MIDDLE</span>
<span class="sd">        isButtonPressed = event.pressed_buttons &amp; buttonToCheck == buttonToCheck</span>

<span class="sd">        print isButtonPressed</span>

<span class="sd">        &gt;&gt; False</span>

<span class="sd">    Event Type ID: EventConstants.MOUSE_BUTTON_PRESS</span>
<span class="sd">    Event Type String: &#39;MOUSE_BUTTON_PRESS&#39;    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE_BUTTON_PRESS&#39;</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_PRESS</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">IOHUB_DATA_TABLE</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">MouseButtonEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MouseButtonReleaseEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.MouseButtonReleaseEvent">[docs]</a><span class="k">class</span> <span class="nc">MouseButtonReleaseEvent</span><span class="p">(</span><span class="n">MouseButtonEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MouseButtonUpEvent&#39;s are created when a button on the mouse is released. </span>
<span class="sd">    The button_state of the event will equal MouseConstants.MOUSE_BUTTON_STATE_RELEASED,</span>
<span class="sd">    and the button that was pressed (button_id) will be MouseConstants.MOUSE_BUTTON_ID_LEFT,</span>
<span class="sd">    MouseConstants.MOUSE_BUTTON_ID_RIGHT, or MouseConstants.MOUSE_BUTTON_ID_MIDDLE, </span>
<span class="sd">    assuming you have a 3 button mouse.</span>

<span class="sd">    Event Type ID: EventConstants.MOUSE_BUTTON_RELEASE</span>
<span class="sd">    Event Type String: &#39;MOUSE_BUTTON_RELEASE&#39;    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE_BUTTON_RELEASE&#39;</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_BUTTON_RELEASE</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">IOHUB_DATA_TABLE</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">MouseButtonEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MouseDoubleClickEvent"><a class="viewcode-back" href="../../../iohub/api/device_details/mouse.html#ioHub.devices.mouse.MouseDoubleClickEvent">[docs]</a><span class="k">class</span> <span class="nc">MouseDoubleClickEvent</span><span class="p">(</span><span class="n">MouseButtonEvent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MouseDoubleClickEvent&#39;s are created when you rapidly press and release a </span>
<span class="sd">    mouse button twice. This event may never get triggered if your OS does not support it.</span>
<span class="sd">    The button that was double clicked (button_id) will be MouseConstants.MOUSE_BUTTON_ID_LEFT,</span>
<span class="sd">    MouseConstants.MOUSE_BUTTON_ID_RIGHT, or MouseConstants.MOUSE_BUTTON_ID_MIDDLE, </span>
<span class="sd">    assuming you have a 3 button mouse.</span>

<span class="sd">    Event Type ID: EventConstants.MOUSE_DOUBLE_CLICK</span>
<span class="sd">    Event Type String: &#39;MOUSE_DOUBLE_CLICK&#39;    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">EVENT_TYPE_STRING</span><span class="o">=</span><span class="s">&#39;MOUSE_DOUBLE_CLICK&#39;</span>
    <span class="n">EVENT_TYPE_ID</span><span class="o">=</span><span class="n">EventConstants</span><span class="o">.</span><span class="n">MOUSE_DOUBLE_CLICK</span>
    <span class="n">IOHUB_DATA_TABLE</span><span class="o">=</span><span class="n">MouseInputEvent</span><span class="o">.</span><span class="n">IOHUB_DATA_TABLE</span>
    <span class="n">__slots__</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">MouseButtonEvent</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</pre></div>

</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, iSolver Software Solutions.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>